<!--
  Jenkins Pipeline job config (XML) to create a job that checks out a GitHub repo
  and runs the repository's `Jenkinsfile`.

  Instructions:
  - Replace OWNER/REPO in the <url> with your GitHub repo HTTPS URL (e.g. https://github.com/masauso-lungu/ai4devops.git)
  - Replace GITHUB_CREDENTIALS_ID with the Jenkins credentials ID (username+token or personal access token)
  - Adjust the branch name if you don't use `main` (e.g. */master)
  - Import this XML via Jenkins UI (New Item -> Upload config.xml) or create via Jenkins API POST to /createItem?name=JOB_NAME
  - Configure a GitHub webhook pointing to: https://JENKINS_URL/github-webhook/ and enable "application/json"
-->
<flow-definition plugin="workflow-job@2.45">
  <description>Pipeline job: builds the repo's Jenkinsfile on push (GitHub webhook)</description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
      <triggers>
        <!-- Triggered by GitHub push webhook. Ensure GitHub Plugin is installed. -->
        <com.cloudbees.jenkins.GitHubPushTrigger plugin="github@1.34.1" />
      </triggers>
    </org.jenkinsci.plugins.workflow.job.properties.PipelineTriggersJobProperty>
  </properties>
  <definition class="org.jenkinsci.plugins.workflow.cps.CpsScmFlowDefinition" plugin="workflow-cps@2.90">
    <scm class="hudson.plugins.git.GitSCM" plugin="git@4.11.3">
      <configVersion>2</configVersion>
      <userRemoteConfigs>
        <hudson.plugins.git.UserRemoteConfig>
          <!-- Repository URL -->
          <url>https://github.com/masauso-lungu/ai4devops.git</url>
          <!-- No credentialsId set â€” this config assumes a public repository.
               If your repo is private, add a <credentialsId>YOUR_CREDENTIALS_ID</credentialsId> element here. -->
        </hudson.plugins.git.UserRemoteConfig>
      </userRemoteConfigs>
      <branches>
        <!-- Replace with your branch spec if needed -->
        <hudson.plugins.git.BranchSpec>
          <name>*/main</name>
        </hudson.plugins.git.BranchSpec>
      </branches>
      <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
      <submoduleCfg class="list" />
      <extensions />
    </scm>
  <!-- Path to the Jenkinsfile inside the repo (change if using a different path) -->
  <scriptPath>jenkins/Jenkinsfile</scriptPath>
    <lightweight>true</lightweight>
  </definition>
  <disabled>false</disabled>
</flow-definition>